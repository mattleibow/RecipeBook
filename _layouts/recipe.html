---
layout: default
---

<div class="row">
    <div class="col-md-8 mx-auto">
        <article class="recipe-article">
            <!-- Recipe Title -->
            <header class="text-center mb-4">
                <h1 class="display-4 mb-3">{{ page.title | default: "Recipe" }}</h1>
                {% if page.date %}
                <p class="text-muted">{{ page.date | date: "%B %d, %Y" }}</p>
                {% endif %}
            </header>

            <!-- Recipe Content -->
            <div class="recipe-content">
                {{ content }}
            </div>

            <!-- Recipe Navigation -->
            <nav class="recipe-nav mt-5 pt-4 border-top">
                <div class="row">
                    <div class="col-6">
                        {% if page.previous %}
                        <a href="{{ page.previous.url | relative_url }}" class="btn btn-outline-secondary">
                            &larr; Previous Recipe
                        </a>
                        {% endif %}
                    </div>
                    <div class="col-6 text-end">
                        {% if page.next %}
                        <a href="{{ page.next.url | relative_url }}" class="btn btn-outline-secondary">
                            Next Recipe &rarr;
                        </a>
                        {% endif %}
                    </div>
                </div>
                <div class="text-center mt-3">
                    <a href="{{ '/' | relative_url }}" class="btn btn-primary">Back to Recipe Journal</a>
                </div>
            </nav>
        </article>
    </div>
</div>

<style>
/* Unit conversion tabs styling */
.unit-tabs {
    display: flex;
    background-color: #f8f9fa;
    border-radius: 8px;
    padding: 4px;
    margin: 15px 0;
    justify-content: center;
}

.unit-tab {
    flex: 1;
    text-align: center;
    padding: 8px 12px;
    border: none;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
    font-weight: 500;
}

.unit-tab:hover {
    background-color: #e9ecef;
}

.unit-tab.active {
    background-color: #007bff;
    color: white;
}

.measurement-metric,
.measurement-imperial {
    display: none;
}

.measurement-volume {
    display: block;
}

@media (max-width: 576px) {
    .unit-tabs {
        flex-direction: column;
    }
    
    .unit-tab {
        margin: 2px 0;
    }
}
</style>

<script>
function initializeUnitTabs() {
    // Find all ingredients sections that have measurement conversions
    const ingredientsSections = document.querySelectorAll('.ingredients-section');
    
    ingredientsSections.forEach(section => {
        // Check if this section has conversion data
        const hasConversions = section.querySelector('.measurement-metric, .measurement-imperial, .measurement-volume');
        
        if (hasConversions) {
            // Add tabs before this section
            const tabsHTML = `
                <div class="unit-tabs">
                    <button class="unit-tab active" data-unit="volume">Volume (cups)</button>
                    <button class="unit-tab" data-unit="metric">Metric (g)</button>
                    <button class="unit-tab" data-unit="imperial">Imperial (oz)</button>
                </div>
            `;
            section.insertAdjacentHTML('beforebegin', tabsHTML);
        }
    });
    
    // Add tab functionality
    document.querySelectorAll('.unit-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const unit = this.dataset.unit;
            const tabGroup = this.parentElement;
            const ingredientsSection = tabGroup.nextElementSibling;
            
            // Update active tab
            tabGroup.querySelectorAll('.unit-tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            // Show/hide appropriate measurements
            const allMeasurements = ingredientsSection.querySelectorAll('.measurement-metric, .measurement-imperial, .measurement-volume');
            allMeasurements.forEach(measurement => {
                measurement.style.display = 'none';
            });
            
            const targetMeasurements = ingredientsSection.querySelectorAll(`.measurement-${unit}`);
            targetMeasurements.forEach(measurement => {
                measurement.style.display = 'block';
            });
        });
    });
}

// Add styling classes to content sections
document.addEventListener('DOMContentLoaded', function() {
    // Style story sections
    const storyHeadings = document.querySelectorAll('h2');
    storyHeadings.forEach(heading => {
        if (heading.textContent.toLowerCase().includes('story') || 
            heading.textContent.toLowerCase().includes('beginning') ||
            heading.textContent.toLowerCase().includes('comfort') ||
            heading.textContent.toLowerCase().includes('connection')) {
            let content = heading.nextElementSibling;
            while (content && content.tagName !== 'H2') {
                if (content.tagName === 'P') {
                    if (!content.closest('.recipe-story')) {
                        const wrapper = document.createElement('div');
                        wrapper.className = 'recipe-story';
                        content.parentNode.insertBefore(wrapper, content);
                        wrapper.appendChild(heading);
                        while (wrapper.nextElementSibling && wrapper.nextElementSibling.tagName !== 'H2') {
                            wrapper.appendChild(wrapper.nextElementSibling);
                        }
                        break;
                    }
                }
                content = content.nextElementSibling;
            }
        }
    });

    // Style ingredients sections
    const ingredientsHeadings = document.querySelectorAll('h2, h3');
    ingredientsHeadings.forEach(heading => {
        if (heading.textContent.toLowerCase().includes('ingredient')) {
            let section = heading.nextElementSibling;
            while (section && section.tagName !== 'H2') {
                if (section.tagName === 'UL') {
                    section.classList.add('ingredients-section');
                }
                section = section.nextElementSibling;
            }
        }
    });

    // Style instructions sections
    const instructionsHeadings = document.querySelectorAll('h2, h3');
    instructionsHeadings.forEach(heading => {
        if (heading.textContent.toLowerCase().includes('instruction')) {
            let section = heading.nextElementSibling;
            while (section && section.tagName !== 'H2') {
                if (section.tagName === 'OL' || section.tagName === 'UL') {
                    section.classList.add('instructions-section');
                }
                section = section.nextElementSibling;
            }
        }
    });

    // Style tips sections
    const tipsHeadings = document.querySelectorAll('h2, h3');
    tipsHeadings.forEach(heading => {
        if (heading.textContent.toLowerCase().includes('tip')) {
            let section = heading.nextElementSibling;
            while (section && section.tagName !== 'H2') {
                if (section.tagName === 'UL' || section.tagName === 'P') {
                    section.classList.add('tips-section');
                }
                section = section.nextElementSibling;
            }
        }
    });
    
    // Add unit conversion tabs after all sections are styled
    initializeUnitTabs();
});
</script>